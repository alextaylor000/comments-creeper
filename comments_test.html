<html>
  <head><script src="https://code.jquery.com/jquery-3.0.0.min.js" integrity="sha256-JmvOoLtYsmqlsWxa7mDSLMwa6dZ9rrIdtrrVYRnDRH0=" crossorigin="anonymous"></script>

<style type="text/css">
div.commentspy-commentNode {
  background: rgb(255, 255, 215);
  margin: 10px;
  padding: 10px;
  border: 1px solid #f3f3f3;
  font-family: monospace;
  color: #a0a0a0;
}
</style>
  </head>
  <body>
    <div>i'm a div</div>
    <!-- i'm a comment -->
    <!--
      <div class='text'>
        <h3>i'm a title</h3>
        <p>look at me whoa</p>
      </div>
    -->
  </body>

<script>

// thanks - http://bit.ly/1YsJt6b
const escapeHtml = function(string) {
  const chars = {
     '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#039;'
  }
  return string.replace(/[&<>"']/g, function(m) { return chars[m]; });
}


const commentNode = function(content) {
  return `<div class="commentspy-commentNode">${escapeHtml(content)}</div>`
}


const buildComments = function(nodes) {
  nodes.map(function(_, comment) {
    $('body').prepend(commentNode(comment))
  })
}

let $comments = $('body').contents().map(
  function() {
    if (this.nodeType === 8) {
      return this.nodeValue
    }
  }
)

buildComments($comments)

</script>
</html>
